<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seguimiento de Pedido - Miski Chukulati</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
<style>
body {
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#3b2314,#5c3b1e,#7b4c22);
  color:#fff;
  padding:22px;
  margin:0;
}
.container {
  max-width:900px;
  margin:36px auto;
  background:rgba(255,255,255,0.08);
  padding:24px;
  border-radius:12px;
}
label {
  display:block;
  margin-top:10px;
  font-weight:600;
}
input, button {
  padding:10px;
  border-radius:8px;
  border:1px solid #d4c5b2;
  width:100%;
  box-sizing:border-box;
}
button {
  background:linear-gradient(90deg,#c7a86d,#e5c99c);
  color:#3b2314;
  font-weight:700;
  cursor:pointer;
  margin-top:12px;
}
.result {
  margin-top:18px;
  background:rgba(255,255,255,0.05);
  padding:12px;
  border-radius:8px;
  display:none;
}
a.download {
  display:inline-block;
  margin-top:12px;
  padding:10px 16px;
  border-radius:24px;
  background:linear-gradient(90deg,#c7a86d,#e5c99c);
  color:#3b2314;
  text-decoration:none;
  font-weight:700;
}
</style>
</head>
<body>
<div class="container">
  <h2>Seguimiento de Pedido</h2>
  <p>Busca por <b>ID de pedido</b> (MSK-YYYY-XXX) o por <b>DNI</b></p>

  <label>ID de Pedido</label>
  <input id="idPedido" placeholder="MSK-2025-001">

  <label style="margin-top:8px">O DNI</label>
  <input id="dni" placeholder="DNI 8 dÃ­gitos">

  <button id="btnSearch">Buscar</button>

  <div id="result" class="result"></div>
</div>

<script>
const SCRIPT_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzjkZePM6u1C5mWYEzuFSBNBhWjM-DNaYI56LHOSMU3Hxk3CaSAm8pPn0gtMkXTb5cx/exec";

const btn = document.getElementById('btnSearch');
const result = document.getElementById('result');

btn.addEventListener('click', async () => {
  result.style.display='none';
  result.innerHTML='Buscando...';
  
  const idPedido = document.getElementById('idPedido').value.trim();
  const dni = document.getElementById('dni').value.trim();
  if(!idPedido && !dni){ 
    result.style.display='block';
    result.innerHTML='Ingresa ID o DNI';
    return; 
  }

  try {
    const params = new URLSearchParams();
    params.append('action','trackOrder');
    if(idPedido) params.append('idPedido', idPedido);
    if(dni) params.append('dni', dni);

    const res = await fetch(SCRIPT_WEB_APP_URL + '?' + params.toString(), {method:'GET', mode:'cors'});
    const json = await res.json();

    if(json.success && json.order){
      const o = json.order;
      result.style.display='block';
      result.innerHTML = `
        <strong>ID Pedido:</strong> ${o.idPedido} <br>
        <strong>Fecha / Hora:</strong> ${o.fecha} <br>
        <strong>DNI:</strong> ${o.dni} <br>
        <strong>Nombre:</strong> ${o.nombre}
