<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Registro Miski Rider</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#3b2314,#5c3b1e,#7b4c22);color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px}
  .card{background:rgba(255,255,255,0.08);padding:24px;border-radius:16px;max-width:480px;width:100%;box-shadow:0 0 20px rgba(212,175,55,0.3)}
  h2{color:#f7e7ce;margin-bottom:16px;text-align:center}
  label{display:block;margin-top:12px;font-weight:600;text-align:left}
  input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #d4c5b2;margin-top:6px;background:rgba(255,255,255,0.15);color:#fff}
  input[type="file"]{background:transparent;}
  button{margin-top:20px;width:100%;padding:12px;border-radius:30px;border:none;background:linear-gradient(90deg,#a67c52,#d4af37);color:#3b2314;font-weight:700;cursor:pointer}
  .msg{margin-top:14px;font-size:.95rem;text-align:center}
</style>
</head>
<body>
<div class="card">
  <h2>Registro de Miski Rider</h2>
  <form id="riderForm">
    <label>Nombre completo</label><input type="text" name="nombre" required>

    <label>DNI (número)</label><input type="text" name="dni" maxlength="12" required>

    <label>Edad</label><input type="number" name="edad" min="18" max="70" required>

    <label>Celular</label><input type="text" name="celular" placeholder="9xxxxxxxx">

    <label>Escaneo DNI (PDF / JPG / PNG)</label>
    <input type="file" name="dniFile" accept=".pdf,.jpg,.jpeg,.png" required>

    <label>Foto personal (JPG / PNG)</label>
    <input type="file" name="fotoFile" accept=".jpg,.jpeg,.png" required>

    <label>Antecedentes (PDF / IMG)</label>
    <input type="file" name="antecedentesFile" accept=".pdf,.jpg,.jpeg,.png" required>

    <label>Contrato firmado (PDF / IMG)</label>
    <input type="file" name="contratoFile" accept=".pdf,.jpg,.jpeg,.png" required>

    <label>Examen médico (PDF / IMG)</label>
    <input type="file" name="examenFile" accept=".pdf,.jpg,.jpeg,.png">

    <button type="submit">Enviar Legajo</button>
  </form>
  <div id="msg" class="msg"></div>
</div>

<script>
const SCRIPT_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw5TuK6rVuBmEisEVmJfQc0f0R5OYMTgvywBVifaiJySd4fWCmjXG1SfsCKbKqNmmZVAg/exec";

document.getElementById('riderForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const form = e.target;
  const fd = new FormData(form);
  fd.append('action','registerApplicant');
  const msg = document.getElementById('msg');
  msg.textContent = 'Enviando legajo...';

  try {
    const res = await fetch(SCRIPT_WEB_APP_URL, { method:'POST', body: fd });
    const json = await res.json();
    if(json.success){
      msg.innerHTML = `✅ Legajo enviado. Código interno: <b>${json.applicantId}</b><br>Recibirás un correo si eres aprobado.`;
      form.reset();
    } else {
      msg.textContent = 'Error: ' + (json.error || 'No se pudo enviar.');
    }
  } catch(err) {
    console.error(err);
    msg.textContent = 'Error de conexión.';
  }
});
</script>
</body>
</html>
