<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pedido - Miski Chukulati</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #3b2314, #5c3b1e, #7b4c22);
    color: #fff;
    margin: 0;
    padding: 0;
  }
  header {
    text-align: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
  }
  header img {
    width: 130px;
    border-radius: 50%;
  }
  .container {
    max-width: 750px;
    margin: 40px auto;
    background: rgba(255, 255, 255, 0.08);
    padding: 25px;
    border-radius: 12px;
  }
  h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: 600;
  }
  input, select, textarea {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #d4c5b2;
    margin-top: 5px;
    font-family: 'Poppins', sans-serif;
  }
  button {
    width: 100%;
    margin-top: 20px;
    padding: 12px;
    background: linear-gradient(90deg, #c7a86d, #e5c99c);
    color: #3b2314;
    border: none;
    border-radius: 24px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover {
    transform: scale(1.03);
  }
  .success, .error {
    text-align: center;
    margin-top: 15px;
    padding: 12px;
    border-radius: 8px;
  }
  .success {
    background: rgba(255,255,255,0.1);
    color: #c7ffb2;
  }
  .error {
    background: rgba(255,0,0,0.1);
    color: #ffb2b2;
  }
  .track {
    display: block;
    text-align: center;
    margin-top: 30px;
  }
  .track a {
    color: #e5c99c;
    font-weight: 600;
    text-decoration: none;
    border-bottom: 1px dashed #e5c99c;
  }
  .track a:hover {
    color: #fff;
  }
</style>
</head>
<body>
  <header>
    <img src="https://miskichukulati25-rgb.github.io/MiskiChukulati/assets/logo.png" alt="Miski Chukulati Logo">
    <h2>Formulario de Pedido</h2>
  </header>

  <div class="container">
    <form id="orderForm">
      <label>Nombre completo</label>
      <input type="text" id="nombre" required>

      <label>DNI</label>
      <input type="text" id="dni" maxlength="8" required>

      <label>Celular</label>
      <input type="tel" id="celular" maxlength="9" required>

      <label>Correo electr√≥nico</label>
      <input type="email" id="correo" required>

      <label>Producto</label>
      <select id="producto" required>
        <option value="">Seleccionar...</option>
        <option value="Chocotejas">Chocotejas</option>
        <option value="Tabletas de Chocolate">Tabletas de Chocolate</option>
        <option value="Bombones Artesanales">Bombones Artesanales</option>
      </select>

      <label>Cantidad</label>
      <input type="number" id="cantidad" min="1" required>

      <label>Direcci√≥n de entrega</label>
      <textarea id="direccion" rows="2" required></textarea>

      <button type="submit">Enviar Pedido</button>
    </form>

    <div id="msg"></div>

    <div class="track">
      <p>¬øYa hiciste tu pedido?</p>
      <a href="https://miskichukulati25-rgb.github.io/MiskiChukulati/tracking.html" target="_blank">üì¶ Seguir mi pedido</a>
    </div>
  </div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbypicbViQpx68de35No3yAEd2XoLHOQ5banZ8cmJjn15es3eus8K4rTM8sRtFoPaDiH/exec";

document.getElementById("orderForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const msg = document.getElementById("msg");
  msg.innerHTML = "‚è≥ Enviando pedido...";
  msg.className = "";

  const data = {
    action: "addOrder",
    nombre: document.getElementById("nombre").value,
    dni: document.getElementById("dni").value,
    celular: document.getElementById("celular").value,
    correo: document.getElementById("correo").value,
    producto: document.getElementById("producto").value,
    cantidad: document.getElementById("cantidad").value,
    direccion: document.getElementById("direccion").value
  };

  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      mode: "cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });
    const json = await res.json();

    if (json.success) {
      msg.className = "success";
      msg.innerHTML = "‚úÖ Pedido enviado correctamente. Te enviaremos el comprobante pronto.";
      document.getElementById("orderForm").reset();
    } else {
      msg.className = "error";
      msg.innerHTML = "‚ö†Ô∏è No se pudo registrar el pedido. Intenta de nuevo.";
    }
  } catch (err) {
    console.error(err);
    msg.className = "error";
    msg.innerHTML = "‚ùå Error de conexi√≥n. Verifica tu red.";
  }
});
</script>
</body>
</html>
