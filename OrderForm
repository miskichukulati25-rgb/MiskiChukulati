<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Haz tu Pedido - Miski Chukulati</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#3b2314,#5c3b1e,#7b4c22);color:#fff;padding:22px;margin:0}
.container{max-width:820px;margin:36px auto;background:rgba(255,255,255,0.08);padding:24px;border-radius:12px}
label{display:block;margin-top:10px;font-weight:600}
input,select,button{padding:10px;border-radius:8px;border:1px solid #d4c5b2;width:100%;margin-top:4px}
.totalBox{margin-top:16px;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px}
button{background:linear-gradient(90deg,#c7a86d,#e5c99c);color:#3b2314;font-weight:700;border:none;cursor:pointer}
</style>
</head>
<body>
<div class="container">
<h2>Haz tu Pedido</h2>
<label>Nombre Completo</label><input id="nombre">
<label>Correo</label><input id="correo">
<label>Celular</label><input id="telefono">
<label>DNI</label><input id="dni">
<label>Producto</label>
<select id="producto">
  <option value="Tableta 70 % cacao">Tableta 70 % cacao</option>
  <option value="Tableta 85 % cacao">Tableta 85 % cacao</option>
  <option value="Bombones surtidos">Bombones surtidos</option>
  <option value="Dark Chocolate Bar">Dark Chocolate Bar</option>
  <option value="ChocoNibs">ChocoNibs</option>
  <option value="ChocoBites">ChocoBites</option>
  <option value="Chocolate Blanco">Chocolate Blanco</option>
</select>
<label>Cantidad</label><input id="cantidad" type="number" value="1">
<label>Método de Pago</label>
<select id="metodoPago">
  <option>PLIN</option><option>YAPE</option><option>Transferencia</option><option>Efectivo</option>
</select>
<label>Courier</label>
<select id="courier">
  <option>Correo1</option><option>Correo2</option><option>Correo3</option>
</select>

<div class="totalBox">
<p>Base Imponible: S/ <span id="base">0.00</span></p>
<p>IGV: S/ <span id="igv">0.00</span></p>
<p>Comisión Envío: S/ <span id="comision">7.00</span></p>
<p><b>Total a pagar por tu pedido es: S/ <span id="total">0.00</span></b></p>
</div>

<button id="btnSend">Enviar Pedido</button>
<div id="msg" style="margin-top:12px"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzjkZePM6u1C5mWYEzuFSBNBhWjM-DNaYI56LHOSMU3Hxk3CaSAm8pPn0gtMkXTb5cx/exec";
const precios={"Tableta 70 % cacao":8,"Tableta 85 % cacao":9,"Bombones surtidos":15,"Dark Chocolate Bar":8,"ChocoNibs":5,"ChocoBites":6.5,"Chocolate Blanco":24};
const cantidadInput = document.getElementById('cantidad');
const productoSelect = document.getElementById('producto');
const baseEl=document.getElementById('base'), igvEl=document.getElementById('igv'), comisionEl=document.getElementById('comision'), totalEl=document.getElementById('total');
const comision = 7;

function calcularTotal(){
  const cantidad=Number(cantidadInput.value);
  const producto=productoSelect.value;
  const base = precios[producto]*cantidad;
  const igv = base*0.18;
  const total = base+igv+comision;
  baseEl.innerText=base.toFixed(2);
  igvEl.innerText=igv.toFixed(2);
  totalEl.innerText=total.toFixed(2);
}

cantidadInput.addEventListener('input',calcularTotal);
productoSelect.addEventListener('change',calcularTotal);
calcularTotal();

document.getElementById('btnSend').addEventListener('click',async()=>{
  const data={
    nombre:document.getElementById('nombre').value,
    correo:document.getElementById('correo').value,
    telefono:document.getElementById('telefono').value,
    dni:document.getElementById('dni').value,
    producto:document.getElementById('producto').value,
    cantidad:Number(document.getElementById('cantidad').value),
    metodoPago:document.getElementById('metodoPago').value,
    courier:document.getElementById('courier').value,
    comisionEnvio:comision
  };
  const res = await fetch(SCRIPT_URL,{method:'POST',body:JSON.stringify(data)});
  const json = await res.json();
  if(json.success) document.getElementById('msg').innerHTML=`Pedido registrado ✅ ID: ${json.idPedido}`;
  else document.getElementById('msg').innerHTML=`Error: ${json.error}`;
});
</script>
</body>
</html>
